[![Build status](https://img.shields.io/travis/katiawheeler/healthy.svg?style=flat-square)](https://img.shields.io/travis/katiawheeler/healthy.svg?style=flat-square)
[![Build size](https://img.shields.io/bundlephobia/min/react-healthy.svg?style=flat-square)](https://img.shields.io/bundlephobia/min/react-healthy.svg?style=flat-square)
[![Open Issues](https://img.shields.io/github/issues/katiawheeler/healthy.svg?style=flat-square)](https://img.shields.io/github/issues/katiawheeler/healthy.svg?style=flat-square)

Healthy is a react-based health check application for the APIs serving your client application. Quickly alert your users to API issues.

# Installation

```node
npm i react-healthy
```

or

```node
yarn add react-healthy
```

# Usage

You can import one of the pre-made React components from the package or the functionality to create your own status page or banner. The only thing you need to adhere to is the shape of the APIs you pass in.

```ts
interface Api {
  name: string;
  endpoint: string;
  options?: {
    message: string;
  };
}
```

There are three parts that you can access:

- [Healthy (a banner)](###Banner-Component)
- [Status Page](###Status-Page)
- [Begin Function](###Begin-Function)

## Healthy

The `Healthy` component is a banner that will display at the top of your application, alerting the user to any issues with the APIs you pass in. It takes in the following prop options:

```ts
interface HealthyProps {
  /** An array of API objects */
  apis: Api[];

  /** A callback that's called after the component handles the error, for additional error handling */
  onError?: Handler;

  /** The interval at which to call the APIs in milliseconds - default is 30 seconds (30000) */
  interval?: number;

  /** A callback to handle all responses that are not errors
   */
  onResponse?: Handler;

  /** CSS class names to assign to the banner, banner content, and close button */
  classes?: {
    banner?: string;
    content?: string;
    closeButton?: string;
  };

  /** Whether or not to show a close icon - default is false */
  isCloseable?: boolean;
}
```

### Basic Usage

Simply import the `Healthy` component in your main container (your `Root` file or wherever you are utilizing `ReactDOM.render`), and pass in an array of APIs

Example:

```jsx
// index.js - generated by CRA and modified

import React from 'react';
import ReactDOM from 'react-dom';
import { Healthy } from 'react-healthy';

import App from './App';
import * as serviceWorker from './serviceWorker';

const myAppsApis = [
  {
    name: 'Api1',
    endpoint: 'https://httpstat.us/200'
  },
  {
    name: 'Api2',
    endpoint: 'https://httpstat.us/500'
  }
];

ReactDOM.render(
  <>
    <Healthy apis={myAppsApis} />
    <App />
  </>
  , document.getElementById('root'));

//...
```

### Advanced Usage

The `Healthy` component allows you to pass in an `onError` and an `onResponse` handler. These are called **after** the banner component handles the error internally (displaying itself). These handlers will allow you to make any adjustments in your application as needed. A handler needs to be able to take in an `Api` object and a `Response` object.

```ts
// handler.ts

export type Handler = (api: Api, response: Response) => void;
```

```ts
export interface Api {
  name: string;
  endpoint: string;
  options?: {
    message: string;
  };
}

export interface Response {
  code: number;
  message: string;
}
```

### Status Page

NPM Package to come (and more docs)!
